{"ast":null,"code":"import{useParams,Link,useNavigate}from\"react-router-dom\";import{/*useContext,*/useEffect/*, useState */}from\"react\";/*import DataContext from \"./context/DataContext\";*/import{format}from'date-fns';/*import api from \"./api/posts\";*/import{useStoreActions,useStoreState}from\"easy-peasy\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditPost=function EditPost(/*{\r\n    posts, handleEdit, editBody, setEditBody, editTitle, setEditTitle\r\n}*/){/*const {posts, setPosts}=useContext(DataContext);*/var navigace=useNavigate();var _useParams=useParams(),id=_useParams.id;var posts=useStoreState(function(state){return state.posts;});var setPosts=useStoreActions(function(actions){return actions.setPosts;});var editTitle=useStoreState(function(state){return state.editTitle;});var setEditTitle=useStoreActions(function(actions){return actions.setEditTitle;});var editBody=useStoreState(function(state){return state.editBody;});var setEditBody=useStoreActions(function(actions){return actions.setEditBody;});var getPostId=useStoreState(function(actions){return actions.getPostId;});var post=getPostId(id);var editPost=useStoreActions(function(actions){return actions.editPost;});/*const post = posts.find((post) => (post.id).toString() === id);*/ /*const [editTitle, setEditTitle] = useState('');\r\n    const [editBody, setEditBody] = useState('');*/useEffect(function(){if(post){setEditBody(post.body);setEditTitle(post.title);}},[post,setEditBody,setEditTitle]);var handleEdit=function handleEdit(id){var datetime=format(new Date(),'MMMM dd , yyyy pp');var updatePost={id:id,title:editTitle,datetime:datetime,body:editBody};editPost(updatePost);/*try {\r\n            const response = await api.put(`/posts/${id}`, updatePost);\r\n            setPosts(posts.map((post) => post.id === id ? { ...response.data } : post));\r\n            setEditTitle('');\r\n            setEditBody('');\r\n\r\n        } catch (err) {\r\n            console.log(`Error:${err.message}`);\r\n        }*/};return/*#__PURE__*/_jsxs(\"main\",{className:\"NewPost\",children:[editTitle&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Post\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"newPostForm\",onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postTitle\",children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"postTitle\",type:\"text\",required:true,value:editTitle,onChange:function onChange(e){return setEditTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postBody\",children:\"Body:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"postBody\",required:true,value:editBody,onChange:function onChange(e){return setEditBody(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(){handleEdit(post.id);navigace(\"/\");},children:\" Submit\"})]})]}),!editTitle&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Page Not Fount.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Well, that's disappointing.\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Visit Our Homepage.\"})})]})]});};export default EditPost;","map":{"version":3,"names":["useParams","Link","useNavigate","useEffect","format","useStoreActions","useStoreState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditPost","navigace","_useParams","id","posts","state","setPosts","actions","editTitle","setEditTitle","editBody","setEditBody","getPostId","post","editPost","body","title","handleEdit","datetime","Date","updatePost","className","children","onSubmit","e","preventDefault","htmlFor","type","required","value","onChange","target","onClick","to"],"sources":["C:/Users/Jsala/Záloha/Osobní/Jirka/WeboveAplikace/Kurzy/Javascript/Kurz-jsReact/project-3a/src/EditPost.js"],"sourcesContent":["import { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport { /*useContext,*/ useEffect /*, useState */} from \"react\";\r\n/*import DataContext from \"./context/DataContext\";*/\r\nimport { format } from 'date-fns';\r\n/*import api from \"./api/posts\";*/\r\nimport { useStoreActions,useStoreState } from \"easy-peasy\";\r\n\r\nconst EditPost = (/*{\r\n    posts, handleEdit, editBody, setEditBody, editTitle, setEditTitle\r\n}*/) => {\r\n    /*const {posts, setPosts}=useContext(DataContext);*/\r\n    const navigace = useNavigate();\r\n    const { id } = useParams();\r\n    const posts=useStoreState((state)=>state.posts);\r\n    const setPosts=useStoreActions((actions)=>actions.setPosts);\r\n    const editTitle=useStoreState((state)=>state.editTitle);\r\n    const setEditTitle=useStoreActions((actions)=>actions.setEditTitle);\r\n    const editBody=useStoreState((state)=>state.editBody);\r\n    const setEditBody=useStoreActions((actions)=>actions.setEditBody);\r\n    const getPostId=useStoreState((actions)=>actions.getPostId);\r\n    const post=getPostId(id);\r\n    const editPost=useStoreActions((actions)=>actions.editPost);\r\n    /*const post = posts.find((post) => (post.id).toString() === id);*/\r\n    /*const [editTitle, setEditTitle] = useState('');\r\n    const [editBody, setEditBody] = useState('');*/\r\n\r\n    useEffect(() => {\r\n        if (post) {\r\n            setEditBody(post.body);\r\n            setEditTitle(post.title);\r\n        }\r\n    }, [post, setEditBody, setEditTitle])\r\n\r\n\r\n    const handleEdit = (id) => {\r\n        const datetime = format(new Date(), 'MMMM dd , yyyy pp');\r\n        const updatePost = { id, title: editTitle, datetime, body: editBody };\r\n        editPost(updatePost);\r\n        /*try {\r\n            const response = await api.put(`/posts/${id}`, updatePost);\r\n            setPosts(posts.map((post) => post.id === id ? { ...response.data } : post));\r\n            setEditTitle('');\r\n            setEditBody('');\r\n\r\n        } catch (err) {\r\n            console.log(`Error:${err.message}`);\r\n        }*/\r\n    }\r\n    return (\r\n        <main className=\"NewPost\">\r\n            {editTitle &&\r\n                <>\r\n                    <h2>New Post</h2>\r\n                    <form className=\"newPostForm\" onSubmit={(e) => e.preventDefault()}>\r\n                        <label htmlFor=\"postTitle\">Title:</label>\r\n                        <input\r\n                            id=\"postTitle\"\r\n                            type=\"text\"\r\n                            required\r\n                            value={editTitle}\r\n                            onChange={(e) => setEditTitle(e.target.value)}\r\n                        />\r\n                        <label htmlFor=\"postBody\">Body:</label>\r\n                        <textarea\r\n                            id=\"postBody\"\r\n                            required\r\n                            value={editBody}\r\n                            onChange={(e) => setEditBody(e.target.value)}\r\n                        />\r\n                        <button type=\"submit\" onClick={() => { handleEdit(post.id); navigace(\"/\"); }}> Submit</button>\r\n                    </form>\r\n                </>\r\n            }\r\n            {!editTitle &&\r\n                <>\r\n                    <h2>Page Not Fount.</h2>\r\n                    <p>Well, that's disappointing.</p>\r\n                    <p>\r\n                        <Link to=\"/\">Visit Our Homepage.</Link>\r\n                    </p>\r\n                </>\r\n            }\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default EditPost\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}