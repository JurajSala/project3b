{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jsala/Z\\xE1loha/Osobn\\xED/Jirka/WeboveAplikace/Kurzy/Javascript/Kurz-jsReact/project-3a/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Jsala/Z\\xE1loha/Osobn\\xED/Jirka/WeboveAplikace/Kurzy/Javascript/Kurz-jsReact/project-3a/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Jsala/Z\\xE1loha/Osobn\\xED/Jirka/WeboveAplikace/Kurzy/Javascript/Kurz-jsReact/project-3a/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";var useAxiosFetch=function useAxiosFetch(dataUrl){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),fetchError=_useState4[0],setFetchError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];useEffect(function(){var isMounted=true;var source=axios.CancelToken.source();var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios.get(url,{cancelToken:source.token});case 4:response=_context.sent;if(isMounted){setData(response.data);setFetchError(null);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);if(isMounted){setFetchError(_context.t0.message);setData([]);}case 11:_context.prev=11;isMounted&&setTimeout(function(){return setIsLoading(false);},2000);return _context.finish(11);case 14:case\"end\":return _context.stop();}},_callee,null,[[1,8,11,14]]);}));return function fetchData(_x){return _ref.apply(this,arguments);};}();fetchData(dataUrl);var cleanUp=function cleanUp(){isMounted=false;source.cancel();};return cleanUp;},[dataUrl]);return{data:data,fetchError:fetchError,isLoading:isLoading};};export default useAxiosFetch;","map":{"version":3,"names":["useState","useEffect","axios","useAxiosFetch","dataUrl","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","fetchError","setFetchError","_useState5","_useState6","isLoading","setIsLoading","isMounted","source","CancelToken","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","wrap","_callee$","_context","prev","next","get","cancelToken","token","sent","t0","message","setTimeout","finish","stop","_x","apply","arguments","cleanUp","cancel"],"sources":["C:/Users/Jsala/Záloha/Osobní/Jirka/WeboveAplikace/Kurzy/Javascript/Kurz-jsReact/project-3a/src/hooks/useAxiosFetch.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst useAxiosFetch = (dataUrl) => {\r\n    const [data, setData] = useState([]);\r\n    const [fetchError, setFetchError] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(null);\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        const source = axios.CancelToken.source();\r\n\r\n        const fetchData = async (url) => {\r\n            setIsLoading(true);\r\n            try {\r\n                const response = await axios.get(url, { cancelToken: source.token });\r\n                if (isMounted) {\r\n                    setData(response.data);\r\n                    setFetchError(null);\r\n                }\r\n            } catch (err) {\r\n                if (isMounted) {\r\n                    setFetchError(err.message);\r\n                    setData([]);\r\n                }\r\n            } finally {\r\n                isMounted && setTimeout(() => setIsLoading(false), 2000);\r\n            }\r\n        }\r\n        fetchData(dataUrl);\r\n\r\n        const cleanUp=()=>{\r\n             isMounted=false;\r\n             source.cancel();\r\n        }\r\n        return cleanUp;\r\n    }, [dataUrl])\r\n\r\n    return {data,fetchError,isLoading};\r\n}\r\n\r\nexport default useAxiosFetch;\r\n"],"mappings":"kjBAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,OAAO,CAAK,CAC/B,IAAAC,SAAA,CAAwBL,QAAQ,CAAC,EAAE,CAAC,CAAAM,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAAoCV,QAAQ,CAAC,IAAI,CAAC,CAAAW,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA3CE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAChC,IAAAG,UAAA,CAAkCd,QAAQ,CAAC,IAAI,CAAC,CAAAe,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAzCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9Bd,SAAS,CAAC,UAAM,CACZ,GAAI,CAAAiB,SAAS,CAAG,IAAI,CACpB,GAAM,CAAAC,MAAM,CAAGjB,KAAK,CAACkB,WAAW,CAACD,MAAM,CAAC,CAAC,CAEzC,GAAM,CAAAE,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,GAAG,MAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACxBhB,YAAY,CAAC,IAAI,CAAC,CAACc,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEQ,CAAA/B,KAAK,CAACgC,GAAG,CAACP,GAAG,CAAE,CAAEQ,WAAW,CAAEhB,MAAM,CAACiB,KAAM,CAAC,CAAC,QAA9DR,QAAQ,CAAAG,QAAA,CAAAM,IAAA,CACd,GAAInB,SAAS,CAAE,CACXT,OAAO,CAACmB,QAAQ,CAACpB,IAAI,CAAC,CACtBK,aAAa,CAAC,IAAI,CAAC,CACvB,CAACkB,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,aAED,GAAIb,SAAS,CAAE,CACXL,aAAa,CAACkB,QAAA,CAAAO,EAAA,CAAIC,OAAO,CAAC,CAC1B9B,OAAO,CAAC,EAAE,CAAC,CACf,CAAC,QAAAsB,QAAA,CAAAC,IAAA,IAEDd,SAAS,EAAIsB,UAAU,CAAC,iBAAM,CAAAvB,YAAY,CAAC,KAAK,CAAC,GAAE,IAAI,CAAC,CAAC,OAAAc,QAAA,CAAAU,MAAA,8BAAAV,QAAA,CAAAW,IAAA,MAAAhB,OAAA,sBAEhE,kBAhBK,CAAAL,SAASA,CAAAsB,EAAA,SAAArB,IAAA,CAAAsB,KAAA,MAAAC,SAAA,OAgBd,CACDxB,SAAS,CAACjB,OAAO,CAAC,CAElB,GAAM,CAAA0C,OAAO,CAAC,QAAR,CAAAA,OAAOA,CAAA,CAAK,CACb5B,SAAS,CAAC,KAAK,CACfC,MAAM,CAAC4B,MAAM,CAAC,CAAC,CACpB,CAAC,CACD,MAAO,CAAAD,OAAO,CAClB,CAAC,CAAE,CAAC1C,OAAO,CAAC,CAAC,CAEb,MAAO,CAACI,IAAI,CAAJA,IAAI,CAACI,UAAU,CAAVA,UAAU,CAACI,SAAS,CAATA,SAAS,CAAC,CACtC,CAAC,CAED,cAAe,CAAAb,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}